<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SETALMAA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="style/index.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair:ital,opsz,wght@0,5..1200,300..900;1,5..1200,300..900&display=swap');
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">

        <div class="container  mr-4 ml-4">
            <div class="d-flex justify-content-start fw-bold fs-4 text-white">
                SETALMA
            </div>
            <div class="d-flex justify-content-start">
                <div class="separator"></div>
                <div class="separator ">
                    <div class=" mt-3 fs-5  top-menu "><strong>subscriptions</strong> </div>
                </div>
                <div class="separator">

                    <div class="mt-3  fs-5 top-menu"><strong>Search jobs</strong> </div>
                </div>

                <div class="mt-3  fs-5  top-menu">

                    <i class="fa-solid fa-user top-menu-user"></i>

                    <strong>Sign in</strong>
                </div>

            </div>
        </div>
    </nav>
    <!-- menu -->
    <div class="menu">
        <div class="navbar navbar-expand-lg " data-bs-theme="dark">

            <div class="container  mr-4 ml-4 p-0 ">
                <div class="d-flex justify-content-bottom  menu-container ">
                    <div class="separator">
                        <div class=" mt-3 fs-2 text-white ">
                            <a href="index.html" class="text-decoration-none text-white link-hover">
                                <strong>News</strong>
                            </a>
                        </div>

                    </div>

                    <div class="separator">

                        <div class="mt-3  fs-2 text-white ">
                            <a href="#" class="text-decoration-none text-white link-hover">

                                <strong>Opinion</strong>
                            </a>
                        </div>

                    </div>

                    <div class="separator">

                        <div class="mt-3  fs-2 text-white">
                            <a href="#" class="text-decoration-none text-white link-hover">
                                <strong>Sport</strong>
                            </a>
                        </div>

                    </div>
                    <div class="separator">

                        <div class="mt-3  fs-2 ">
                            <a href="#" class="text-decoration-none text-white link-hover">
                                <strong>Culture</strong>
                            </a>
                        </div>

                    </div>
                    <div class="separator">

                        <div class="mt-3  fs-2 text-white ">
                            <a href="#" class="text-decoration-none text-white link-hover">
                                <strong>Lifestyle</strong>
                            </a>
                        </div>
                    </div>
                    <div class="mt-3  fs-2 text-white">
                        <i class="fa-solid fa-bars menu-burger"> </i>
                    </div>

                </div>
                <!-- logo -->
                <div class="d-flex justify-content-start fw-bold fs-1 text-white ">
                    The<br>
                    SETALMA
                </div>
            </div>
        </div>
    </div>
    <div class="sous-menu">
        <div class="container sous-menu-container">
            <div class="d-flex justify-content-bottom   ">
                <div class="text-white ">
                    <a href="#" class="  sous-menu-link">
                        World
                    </a>
                </div>
                <div class="text-white ">
                    <a href="#" class="  sous-menu-link">
                        UK
                    </a>
                </div>
                <div class="text-white ">
                    <a href="#" class="  sous-menu-link">
                        Climate crise
                    </a>
                </div>
            </div>
        </div>

    </div>
   
</head>
<body>
    <style>
        .article-content img {
    max-width: 100%; /* Limite la largeur à 100% de l'élément parent */
    height: auto;    /* Garde le ratio d'aspect de l'image */
}
#ez-toc-container{
    display: none;
}
    </style>
    
    <div class="container">
        <div class="row">
            <div class="col-md-2 ">
                <h3 class="fw-bold">lorem</h3>
            </div>
            <div id="article" class="article-content col-md-8">
                
            </div>
            <div class="col-md-2 ">
                <h3 class="fw-bold">lorem</h3>
            </div>
        </div>
    </div>

    <script>
          // Fonction pour récupérer et afficher l'image à la une
          async function fetchFeaturedImage(mediaId) {
            const siteUrl = 'https://setalmaa.com'; // Remplacez par l'URL de votre site WordPress
            const mediaUrl = `${siteUrl}/wp-json/wp/v2/media/${mediaId}`;

            try {
                const response = await fetch(mediaUrl);
                if (!response.ok) {
                    throw new Error(`Erreur lors de la récupération de l'image à la une : ${response.statusText}`);
                }
                const media = await response.json();
                return media.source_url; // Retourne l'URL de l'image à la une
            } catch (error) {
                console.error('Erreur :', error);
                return null; // Retourne null en cas d'erreur
            }
        }
        // Fonction pour récupérer l'article en fonction du slug
        async function fetchArticleBySlug(slug) {
            const siteUrl = 'https://setalmaa.com'; // Remplacez par l'URL de votre site WordPress
            const apiUrl = `${siteUrl}/wp-json/wp/v2/posts?slug=${slug}`;
            

            try {
                const response = await fetch(apiUrl);
                if (!response.ok) {
                    throw new Error(`Erreur lors de la récupération de l'article : ${response.statusText}`);
                }
                const articles = await response.json();
                console.log(articles)
                
                // Vérifier si l'article existe
                if (articles.length > 0) {
                    displayArticle(articles[0]);
                } else {
                    document.getElementById('article').innerHTML = '<p>Aucun article trouvé.</p>';
                }
            } catch (error) {
                console.error('Erreur :', error);
                document.getElementById('article').innerHTML = '<p>Une erreur est survenue lors de la récupération de l\'article.</p>';
            }
        }

        // Fonction pour afficher l'article sur la page
       async function displayArticle(article) {
               // Récupérer l'image à la une
               const featuredImageUrl = await fetchFeaturedImage(article.featured_media);

                // Construire le contenu de l'article
                let articleContent = `
                    <h2>${article.title.rendered}</h2>
                `;

                // Afficher l'image à la une si elle existe
                if (featuredImageUrl) {
                    articleContent += `<img class="featured-image mb-3" src="${featuredImageUrl}" alt="${article.title.rendered}">`;
                }

                // Ajouter le contenu de l'article
                articleContent += `<div>${article.content.rendered}</div>`;
                document.getElementById('article').innerHTML = articleContent;
        }

        // Récupérer le slug de l'URL
        const urlParams = new URLSearchParams(window.location.search);
        const slug = urlParams.get('slug'); // Exemple : https://votre-site.com/article.html?slug=mon-super-article

        if (slug) {
            fetchArticleBySlug(slug);
        } else {
            document.getElementById('article').innerHTML = '<p>Veuillez fournir un slug dans l\'URL.</p>';
        }
    </script>
</body>
</html>
